(()=>{var e={39:e=>{"use strict";e.exports=JSON.parse('{"development":{"username":"postgres","password":"password","database":"database_development","host":"postgres","dialect":"postgres"},"test":{"username":"root","password":null,"database":"database_test","host":"127.0.0.1","dialect":"postgres"},"production":{"username":"root","password":null,"database":"database_production","host":"127.0.0.1","dialect":"postgres"}}')},737:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.assignmentService=e,this.createAssignment=this.createAssignment.bind(this),this.readAssignments=this.readAssignments.bind(this),this.deleteAssignment=this.deleteAssignment.bind(this)}return e.prototype.createAssignment=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o,u;return r(this,(function(r){switch(r.label){case 0:n=e.query.assignee,i=e.query.board,s=e.user.sub,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.assignmentService.createAssignment(s,n,i)];case 2:return o=r.sent(),t.send(o),[3,4];case 3:return u=r.sent(),console.log(u),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e.prototype.readAssignments=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,[4,this.assignmentService.readAssignments(n)];case 1:return i=r.sent(),t.send(i),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.deleteAssignment=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:n=e.query.board,i=e.query.assignee,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.assignmentService.deleteAssignment(n,i)];case 2:return r.sent(),t.sendStatus(204),[3,4];case 3:return s=r.sent(),console.log(s),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e}();t.default=i},577:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.boardService=e,this.createBoard=this.createBoard.bind(this),this.readTree=this.readTree.bind(this),this.updateBoard=this.updateBoard.bind(this),this.deleteBoard=this.deleteBoard.bind(this)}return e.prototype.createBoard=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o,u,a;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.project,i=e.query.group,s=e.query.parent,o=e.user.sub,[4,this.boardService.createBoard(n,i,s,o)];case 1:return u=r.sent(),t.send(u),[3,3];case 2:return a=r.sent(),console.log(a),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.readTree=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.project,i=e.user.sub,[4,this.boardService.readTree(i,n)];case 1:return s=r.sent(),t.send(s),[3,3];case 2:return o=r.sent(),console.log(o),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.updateBoard=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.id,i=e.body,[4,this.boardService.updateBoard(n,i)];case 1:return r.sent(),t.sendStatus(201),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.deleteBoard=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:n=e.query.id,i=e.user.sub,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.boardService.deleteBoard(n,i)];case 2:return!0===r.sent()?t.sendStatus(201):t.sendStatus(403),[3,4];case 3:return s=r.sent(),console.log(s),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e}();t.default=i},250:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.commentService=e,this.createComment=this.createComment.bind(this),this.readComments=this.readComments.bind(this)}return e.prototype.createComment=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o,u;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.text,i=e.query.board,s=e.user.sub,[4,this.commentService.createComment(n,i,s)];case 1:return o=r.sent(),t.send(o),[3,3];case 2:return u=r.sent(),console.log(u),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.readComments=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.board,i=e.user.sub,[4,this.commentService.readComments(i,n)];case 1:return s=r.sent(),t.send(s),[3,3];case 2:return o=r.sent(),console.log(o),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e}();t.default=i},865:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.groupService=e,this.createGroup=this.createGroup.bind(this),this.readGroups=this.readGroups.bind(this),this.updateGroup=this.updateGroup.bind(this),this.deleteGroup=this.deleteGroup.bind(this)}return e.prototype.createGroup=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.board,i=e.user.sub,[4,this.groupService.createGroup(i,n)];case 1:return s=r.sent(),t.send(s),[3,3];case 2:return o=r.sent(),console.log(o),[3,3];case 3:return[2]}}))}))},e.prototype.readGroups=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.board_id,[4,this.groupService.readGroups(n)];case 1:return i=r.sent(),t.send(i),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.updateGroup=function(e,t){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.id,i=e.body,[4,this.groupService.updateGroup(n,i)];case 1:return r.sent(),t.sendStatus(201),[3,3];case 2:return r.sent(),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.deleteGroup=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:n=e.query.id,i=e.user.sub,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.groupService.deleteGroup(i,n)];case 2:return!0===r.sent()?t.sendStatus(201):t.sendStatus(403),[3,4];case 3:return s=r.sent(),console.log(s),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e}();t.default=i},917:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.projectService=e,this.createProject=this.createProject.bind(this),this.readProjects=this.readProjects.bind(this),this.deleteProject=this.deleteProject.bind(this)}return e.prototype.createProject=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o,u;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.title,i=e.query.space,s=e.user.sub,[4,this.projectService.createProject(s,n,i)];case 1:return o=r.sent(),t.send(o),[3,3];case 2:return u=r.sent(),console.log(u),t.send(500),[3,3];case 3:return[2]}}))}))},e.prototype.readProjects=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,[4,this.projectService.readProjects(n)];case 1:return i=r.sent(),t.send(i),[3,3];case 2:return s=r.sent(),console.log(s),t.send(500),[3,3];case 3:return[2]}}))}))},e.prototype.deleteProject=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.id,i=e.user.sub,[4,this.projectService.deleteProject(i,n)];case 1:return!0===r.sent()?t.sendStatus(200):t.sendStatus(401),[3,3];case 2:return s=r.sent(),console.log(s),t.send(500),[3,3];case 3:return[2]}}))}))},e}();t.default=i},746:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.spaceService=e,this.createSpace=this.createSpace.bind(this),this.readSpaces=this.readSpaces.bind(this),this.deleteSpace=this.deleteSpace.bind(this)}return e.prototype.createSpace=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.query.title,i=e.user.sub,[4,this.spaceService.createSpace(i,n)];case 1:return s=r.sent(),t.send(s),[3,3];case 2:return o=r.sent(),console.log(o),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.readSpaces=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,[4,this.spaceService.readSpaces(n)];case 1:return i=r.sent(),t.send(i),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.deleteSpace=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:n=e.query.id,i=e.user.sub,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.spaceService.deleteSpace(i,n)];case 2:return!1===r.sent()?(t.sendStatus(401),[2]):[3,4];case 3:return s=r.sent(),console.log(s),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e}();t.default=i},519:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.teamInviteService=e,this.readTeamInvites=this.readTeamInvites.bind(this),this.createTeamInvite=this.createTeamInvite.bind(this),this.updateTeamInviteAccept=this.updateTeamInviteAccept.bind(this),this.deleteInvite=this.deleteInvite.bind(this)}return e.prototype.readTeamInvites=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,[4,this.teamInviteService.readTeamInvites(n)];case 1:return i=r.sent(),t.send(i),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.createTeamInvite=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o,u,a;return r(this,(function(r){switch(r.label){case 0:n=e.query.first,i=e.query.last,s=e.query.email,o=e.query.team,u=e.headers.authorization,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.teamInviteService.createTeamInvite(n,i,s,o,u)];case 2:return!0===r.sent()?t.sendStatus(201):t.sendStatus(409),[3,4];case 3:return a=r.sent(),console.log(a),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e.prototype.updateTeamInviteAccept=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,i=e.query.team,[4,this.teamInviteService.updateTeamInviteAccept(n,i)];case 1:return s=r.sent(),t.sendStatus(s),[3,3];case 2:return o=r.sent(),console.log(o),t.sendStatus(501),[3,3];case 3:return[2]}}))}))},e.prototype.deleteInvite=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,i=e.query.team,[4,this.teamInviteService.deleteInvite(n,i)];case 1:return!0===r.sent()?t.sendStatus(200):t.sendStatus(500),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e}();t.default=i},796:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.teamService=e,this.createTeam=this.createTeam.bind(this),this.readTeamRootsChildren=this.readTeamRootsChildren.bind(this),this.readTeam=this.readTeam.bind(this)}return e.prototype.createTeam=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,i=e.query.title,[4,this.teamService.createTeam(n,i)];case 1:return s=r.sent(),t.send(s),[3,3];case 2:return o=r.sent(),console.log(o),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.readTeamRootsChildren=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:n=e.query.team,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.teamService.readTeamRootsChildren(n)];case 2:return null!==(i=r.sent())?t.send(i):t.sendStatus(500),[3,4];case 3:return s=r.sent(),console.log(s),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e.prototype.readTeam=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,i=e.query.team,[4,this.teamService.readTeam(n,i)];case 1:return null!==(s=r.sent())?t.send(JSON.stringify(s)):t.sendStatus(500),[3,3];case 2:return o=r.sent(),console.log(o),t.sendStatus(503),[3,3];case 3:return[2]}}))}))},e}();t.default=i},238:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.userService=e,this.createUser=this.createUser.bind(this),this.readUser=this.readUser.bind(this),this.readProfiles=this.readProfiles.bind(this),this.updateName=this.updateName.bind(this)}return e.prototype.createUser=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return n=e.user.sub,i=e.headers.authorization,[4,this.userService.createUser(n,i)];case 1:return s=r.sent(),t.send(s),[2]}}))}))},e.prototype.readUser=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,[4,this.userService.readUser(n)];case 1:return i=r.sent(),t.send(i),[3,3];case 2:return s=r.sent(),console.log(s),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e.prototype.readProfiles=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:if(n=e.user.sub,null==(i=e.query.team)||"undefined"===i)return t.sendStatus(400),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.userService.readProfiles(n,i)];case 2:return null!==(s=r.sent())?t.send(JSON.stringify(s)):t.sendStatus(500),[3,4];case 3:return o=r.sent(),console.log(o),t.sendStatus(500),[3,4];case 4:return[2]}}))}))},e.prototype.updateName=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o,u;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.user.sub,i=e.query.first,s=e.query.last,o=e.headers.authorization,[4,this.userService.updateName(n,i,s,o)];case 1:return r.sent(),t.sendStatus(201),[3,3];case 2:return u=r.sent(),console.log(u),t.sendStatus(500),[3,3];case 3:return[2]}}))}))},e}();t.default=i},328:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=n(125),u=function(){function e(){}return e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.Assignment.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.findOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.Assignment.findOne({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.create=function(e,t,n){return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return r=s.uuid(),[4,o.Assignment.create({_id:r,assignee:e,assigner:t,board:n})];case 1:return[2,i.sent()]}}))}))},e.prototype.deleteMany=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.Assignment.destroy({where:e})];case 1:return t.sent(),[2]}}))}))},e.prototype.deleteOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.Assignment.destroy({where:e})];case 1:return t.sent(),[2]}}))}))},e}();t.default=u},510:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=function(){function e(){}return e.prototype.find=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Board.findOne({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Board.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.findByParent=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Board.findAll({where:{parent:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.create=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Board.create(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.incrementCount=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,e.increment("count",{by:t})];case 1:return n.sent(),[4,e.save()];case 2:return n.sent(),[2]}}))}))},e.prototype.merge=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,(n=Object.assign(e,t)).save()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.delete=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Board.destroy({where:{_id:e}})];case 1:return t.sent(),[2]}}))}))},e}();t.default=o},188:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=n(125),u=function(){function e(){}return e.prototype.create=function(e,t,n,u){return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return r=s.uuid(),[4,o.Comment.create({_id:r,text:u,owner:e,board:t,timestamp:n})];case 1:return[2,i.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.Comment.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.deleteMany=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.Comment.destroy({where:e})];case 1:return t.sent(),[2]}}))}))},e}();t.default=u},280:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=n(119),u=function(){function e(){}return e.prototype.create=function(e,t,n,u){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,s.Group.create({_id:o.uuid(),title:e,owner:t,order:n,board:u})];case 1:return[2,r.sent()]}}))}))},e.prototype.find=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Group.findOne({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Group.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.delete=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Group.destroy({where:{_id:e}})];case 1:return t.sent(),[2]}}))}))},e}();t.default=u},818:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=function(){function e(){}return e.prototype.create=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Member.create(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Member.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e}();t.default=o},115:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=n(119),u=function(){function e(){}return e.prototype.create=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,s.Project.create({_id:o.uuid(),title:e,space:t,owner:n})];case 1:return[2,r.sent()]}}))}))},e.prototype.find=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Project.findOne({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Project.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.delete=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Project.destroy({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e}();t.default=u},705:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=n(119),u=function(){function e(){}return e.prototype.create=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,s.Space.create({_id:o.uuid(),title:e,team:t,owner:n})];case 1:return[2,r.sent()]}}))}))},e.prototype.find=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Space.findOne({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.findOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Space.findOne({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Space.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.delete=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Space.destroy({where:{_id:e}})];case 1:return t.sent(),[2]}}))}))},e}();t.default=u},494:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=n(125),u=function(){function e(){}return e.prototype.create=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,o.TeamInvite.create({_id:s.uuid(),team:e,invitee:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.TeamInvite.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.findOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.TeamInvite.findOne({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.deleteOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.TeamInvite.destroy({where:e})];case 1:return t.sent(),[2]}}))}))},e}();t.default=u},738:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=function(){function e(){}return e.prototype.create=function(e,t,n,o){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return null!==n||null!==o?[3,2]:[4,s.Team.create({_id:e,members:t})];case 1:return[2,r.sent()];case 2:return[4,s.Team.create({_id:e,members:t,owner:n,title:o})];case 3:return[2,r.sent()]}}))}))},e.prototype.find=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Team.findOne({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.findOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Team.findOne({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Team.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.delete=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Team.destroy({where:{_id:e}})];case 1:return t.sent(),[2]}}))}))},e.prototype.deleteOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.Team.destroy({where:e})];case 1:return t.sent(),[2]}}))}))},e}();t.default=o},749:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(125),o=function(){function e(){}return e.prototype.create=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.User.create(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.findOne=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.User.findOne({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.findAll=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.User.findAll({where:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.find=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.User.findOne({where:{_id:e}})];case 1:return[2,t.sent()]}}))}))},e}();t.default=o},147:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.userRepository=e,this.assignmentRepository=t}return e.prototype.createAssignment=function(e,t,i){return n(this,void 0,void 0,(function(){var n,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,this.userRepository.findOne({sub:e})];case 1:return n=r.sent(),s=n._id,[4,this.assignmentRepository.findOne({board:i,assignee:t})];case 2:return null!=(o=r.sent())?[2,o]:[4,this.assignmentRepository.create(t,s,i)];case 3:return[2,r.sent()];case 4:throw r.sent();case 5:return[2]}}))}))},e.prototype.readAssignments=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.userRepository.findOne({sub:e})];case 1:return t=n.sent(),[4,this.assignmentRepository.findAll({assignee:t._id})];case 2:return[2,n.sent()];case 3:throw n.sent();case 4:return[2]}}))}))},e.prototype.deleteAssignment=function(e,t){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.assignmentRepository.deleteOne({board:e,assignee:t})];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}}))}))},e}();t.default=i},810:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(119),u=function(){function e(e,t,n,r,i){this.boardRepository=e,this.userRepository=t,this.groupRepository=n,this.assignmentRepository=r,this.commentRepository=i}return e.prototype.recursiveDelete=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,o;return i(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?(r=n[t],[4,this.assignmentRepository.deleteMany({board:r})]):[3,7];case 2:return i.sent(),[4,this.commentRepository.deleteMany({board:r})];case 3:return i.sent(),[4,this.boardRepository.delete(r)];case 4:return i.sent(),[4,this.boardRepository.findByParent(r)];case 5:if(s=i.sent(),!((o=s.map((function(e){return e._id}))).length>0))return[2];this.recursiveDelete(o),i.label=6;case 6:return t++,[3,1];case 7:return[2]}}))}))},e.prototype.recursiveUpdateCount=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,6,,7]),n=e,i.label=1;case 1:return[4,this.boardRepository.find(n)];case 2:return r=i.sent(),[4,this.boardRepository.incrementCount(r,t)];case 3:i.sent(),n=r.parent,i.label=4;case 4:if(null!==n)return[3,1];i.label=5;case 5:return[3,7];case 6:throw i.sent();case 7:return[2]}}))}))},e.prototype.createBoard=function(e,t,n,u){return r(this,void 0,void 0,(function(){var r,a,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,10,,11]),[4,this.userRepository.findOne({sub:u})];case 1:return r=i.sent(),[4,this.boardRepository.findAll({group:t})];case 2:return a=i.sent(),c=Math.max.apply(Math,s([-1],a.map((function(e){return e.order}))))+1,[4,this.boardRepository.create({_id:o.uuid(),title:"",description:"",owner:r._id,order:c,project:e,parent:n,group:t,count:0,comments:!1})];case 3:return l=i.sent(),[4,this.groupRepository.create("Backlog",r._id,0,l._id)];case 4:return i.sent(),[4,this.groupRepository.create("To-do",r._id,1,l._id)];case 5:return i.sent(),[4,this.groupRepository.create("In progress",r._id,2,l._id)];case 6:return i.sent(),[4,this.groupRepository.create("Review",r._id,3,l._id)];case 7:return i.sent(),[4,this.groupRepository.create("Done",r._id,4,l._id)];case 8:return i.sent(),[4,this.recursiveUpdateCount(n,1)];case 9:return i.sent(),[2,l];case 10:throw i.sent();case 11:return[2]}}))}))},e.prototype.readTree=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,o,u,a,c;return i(this,(function(i){switch(i.label){case 0:return[4,this.userRepository.findOne({sub:e})];case 1:return i.sent(),[4,this.boardRepository.findAll({project:t})];case 2:n=i.sent(),r=[],s=0,o=n,i.label=3;case 3:return s<o.length?(u=o[s],console.log(u._id),[4,this.assignmentRepository.findAll({board:u._id})]):[3,6];case 4:a=i.sent(),console.log({assignments:a}),c=a.map((function(e){return e.assignee})),r.push({_id:u._id,title:u.title,description:u.description,project:u.project,owner:u.owner,parent:u.parent,group:u.group,order:u.order,start:u.start,end:u.end,count:u.count,comments:u.comments,createdAt:u.createdAt,updatedAt:u.updatedAt,assignees:c}),i.label=5;case 5:return s++,[3,3];case 6:return[2,r]}}))}))},e.prototype.updateBoard=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this.boardRepository.find(e)];case 1:return n=r.sent(),[4,this.boardRepository.merge(n,t)];case 2:return[2,r.sent()]}}))}))},e.prototype.deleteBoard=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,this.userRepository.findOne({sub:t})];case 1:return n=i.sent(),[4,this.boardRepository.find(e)];case 2:return(r=i.sent()).owner!=n._id?[3,6]:null===r.parent?[3,4]:[4,this.recursiveUpdateCount(r.parent,-1)];case 3:i.sent(),i.label=4;case 4:return[4,this.recursiveDelete([e])];case 5:return i.sent(),[2,!0];case 6:return[2,!1]}}))}))},e}();t.default=u},499:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n,r,i,s,o){this.userRepository=e,this.commentRepository=t,this.boardRepository=n,this.projectRepository=r,this.spaceRepository=i,this.teamRepository=s,this.memberRepository=o}return e.prototype.createComment=function(e,t,i){return n(this,void 0,void 0,(function(){var n,s,o,u;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),n=(new Date).getTime(),[4,this.userRepository.findOne({sub:i})];case 1:return s=r.sent(),[4,this.commentRepository.create(s._id,t,n,e)];case 2:return o=r.sent(),[4,this.boardRepository.find(t)];case 3:return!1!==(u=r.sent()).comments&&void 0!==u.comments||(u.comments=!0,u.save()),[2,o];case 4:throw r.sent();case 5:return[2]}}))}))},e.prototype.readComments=function(e,t){return n(this,void 0,void 0,(function(){var n,i,s,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,8,,9]),[4,this.userRepository.findOne({sub:e})];case 1:return n=r.sent(),[4,this.boardRepository.find(t)];case 2:return i=r.sent(),[4,this.projectRepository.find(i.project)];case 3:return s=r.sent(),[4,this.spaceRepository.find(s.space)];case 4:return o=r.sent(),[4,this.memberRepository.findAll({team:o.team})];case 5:return r.sent().map((function(e){return e._id})).includes(n._id)?[4,this.commentRepository.findAll({board:t})]:[3,7];case 6:return[2,r.sent().sort((function(e,t){return+(parseInt(e.timestamp)<parseInt(t.timestamp))}))];case 7:return[2,null];case 8:throw r.sent();case 9:return[2]}}))}))},e}();t.default=i},562:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,n,r,i,s){this.boardRepository=e,this.userRepository=t,this.groupRepository=n,this.assignmentRepository=r,this.commentRepository=i,this.boardService=s}return e.prototype.createGroup=function(e,t){return n(this,void 0,void 0,(function(){var n,s,o,u;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,this.userRepository.findOne({sub:e})];case 1:return n=r.sent(),s=n._id,[4,this.boardRepository.find(t)];case 2:return r.sent(),[4,this.groupRepository.findAll({board:t})];case 3:return o=r.sent(),u=Math.max.apply(Math,i([-1],o.map((function(e){return e.order}))))+1,[4,this.groupRepository.create("",s,u,t)];case 4:return[2,r.sent()];case 5:throw r.sent();case 6:return[2]}}))}))},e.prototype.readGroups=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.groupRepository.findAll({board:e})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}}))}))},e.prototype.updateGroup=function(e,t){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.groupRepository.find(e)];case 1:return n=r.sent(),(i=Object.assign(n,t)).save(),[2,i];case 2:throw r.sent();case 3:return[2]}}))}))},e.prototype.deleteGroup=function(e,t){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,9,,10]),[4,this.userRepository.findOne({sub:e})];case 1:return n=r.sent(),[4,this.groupRepository.find(t)];case 2:return r.sent().owner!=n._id?[3,7]:[4,this.groupRepository.delete(t)];case 3:return r.sent(),[4,this.boardRepository.findAll({group:t})];case 4:return(i=r.sent()).length>0?[4,this.boardService.recursiveDelete(i.map((function(e){return e._id})))]:[3,6];case 5:r.sent(),r.label=6;case 6:return[2,!0];case 7:return[2,!1];case 8:return[3,10];case 9:throw r.sent();case 10:return[2]}}))}))},e}();t.default=s},162:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=function(){function e(e,t,n,r,i,s,o,u,a){this.boardRepository=e,this.userRepository=t,this.groupRepository=n,this.assignmentRepository=r,this.commentRepository=i,this.projectRepository=s,this.spaceRepository=o,this.memberRepository=u,this.boardService=a}return e.prototype.createProject=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,u;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,9,,10]),[4,this.userRepository.findOne({sub:e})];case 1:return r=i.sent(),[4,this.projectRepository.create(t,n,r._id)];case 2:return o=i.sent(),[4,this.boardRepository.create({_id:s.uuid(),title:t,description:"",owner:r._id,order:0,project:o._id,parent:null,group:null,count:0,comments:!1})];case 3:return u=i.sent(),[4,this.groupRepository.create("Backlog",r._id,0,u._id)];case 4:return i.sent(),[4,this.groupRepository.create("To-do",r._id,1,u._id)];case 5:return i.sent(),[4,this.groupRepository.create("In progress",r._id,2,u._id)];case 6:return i.sent(),[4,this.groupRepository.create("Review",r._id,3,u._id)];case 7:return i.sent(),[4,this.groupRepository.create("Done",r._id,4,u._id)];case 8:return i.sent(),[2,o];case 9:throw i.sent();case 10:return[2]}}))}))},e.prototype.readProjects=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,o,u,a,c;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),[4,this.userRepository.findOne({sub:e})];case 1:return t=i.sent(),[4,this.memberRepository.findAll({user:t._id})];case 2:n=i.sent().map((function(e){return e.team})),r=[],s=0,o=n,i.label=3;case 3:return s<o.length?(u=o[s],[4,this.spaceRepository.findOne({team:u})]):[3,7];case 4:return a=i.sent(),[4,this.projectRepository.findAll({space:a._id})];case 5:c=i.sent(),r.push.apply(r,c),i.label=6;case 6:return s++,[3,3];case 7:return[2,r];case 8:throw i.sent();case 9:return[2]}}))}))},e.prototype.deleteProject=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),[4,this.userRepository.findOne({sub:e})];case 1:return n=i.sent(),[4,this.projectRepository.find(t)];case 2:return r=i.sent(),n._id!=r.owner?[3,6]:[4,this.boardRepository.findAll({project:t})];case 3:return s=i.sent(),[4,this.boardService.recursiveDelete(s.map((function(e){return e._id})))];case 4:return i.sent(),[4,this.projectRepository.delete(t)];case 5:return i.sent(),[2,!0];case 6:return[2,!1];case 7:return[3,9];case 8:throw i.sent();case 9:return[2]}}))}))},e}();t.default=o},634:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=function(){function e(e,t,n,r,i,s,o,u,a,c){this.boardRepository=e,this.userRepository=t,this.groupRepository=n,this.assignmentRepository=r,this.commentRepository=i,this.teamRepository=s,this.spaceRepository=o,this.projectRepository=u,this.memberRepository=a,this.boardService=c}return e.prototype.createSpace=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,this.userRepository.findOne({sub:e})];case 1:return n=i.sent(),[4,this.teamRepository.create(s.uuid(),[n._id],null,null)];case 2:return r=i.sent(),[4,this.spaceRepository.create(t,r._id,n._id)];case 3:return o=i.sent(),[4,this.memberRepository.create({_id:s.uuid(),team:r._id,user:n._id})];case 4:return i.sent(),[2,o];case 5:throw i.sent();case 6:return[2]}}))}))},e.prototype.readSpaces=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,o,u,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),[4,this.userRepository.findOne({sub:e})];case 1:return t=i.sent(),[4,this.memberRepository.findAll({user:t._id})];case 2:n=i.sent().map((function(e){return e.team})),console.log({teams:n}),r=[],s=0,o=n,i.label=3;case 3:return s<o.length?(u=o[s],[4,this.spaceRepository.findOne({team:u})]):[3,6];case 4:a=i.sent(),r.push(a),i.label=5;case 5:return s++,[3,3];case 6:return[2,r];case 7:throw i.sent();case 8:return[2]}}))}))},e.prototype.deleteSpace=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,o,u,a,c,l,f,h,p,d;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,17,,18]),[4,this.userRepository.findOne({sub:e})];case 1:return n=i.sent(),[4,this.spaceRepository.find(t)];case 2:return r=i.sent(),[4,this.teamRepository.find(r.team)];case 3:return s=i.sent(),n._id!=r.owner?[2,!1]:[4,this.projectRepository.findAll({space:t})];case 4:o=i.sent(),u=0,a=o,i.label=5;case 5:return u<a.length?(c=a[u],[4,this.boardRepository.findAll({project:c._id})]):[3,10];case 6:return l=i.sent(),[4,this.boardService.recursiveDelete(l.map((function(e){return e._id})))];case 7:return i.sent(),[4,this.projectRepository.delete(c._id)];case 8:i.sent(),i.label=9;case 9:return u++,[3,5];case 10:f=0,h=s.members,i.label=11;case 11:return f<h.length?(p=h[f],[4,this.userRepository.find(p)]):[3,14];case 12:(d=i.sent()).spaces=d.spaces.filter((function(e){return e!==t})),d.save(),i.label=13;case 13:return f++,[3,11];case 14:return[4,this.spaceRepository.delete(t)];case 15:return i.sent(),[4,this.teamRepository.delete(r.team)];case 16:return i.sent(),[2,!0];case 17:throw i.sent();case 18:return[2]}}))}))},e}();t.default=o},940:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=n(658),u=n(840),a=function(){function e(e,t,n,r){this.teamInviteRepository=e,this.teamRepository=t,this.spaceRepository=n,this.userRepository=r}return e.prototype.readTeamInvites=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,o,u,a,c;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),[4,this.userRepository.findOne({sub:e})];case 1:return t=i.sent(),[4,this.teamInviteRepository.findAll({invitee:t._id})];case 2:n=i.sent(),r=[],s=0,o=n,i.label=3;case 3:return s<o.length?(u=o[s],[4,this.spaceRepository.find(u.team)]):[3,7];case 4:return a=i.sent(),[4,this.teamRepository.find(a.team)];case 5:c=i.sent(),r.push(c),i.label=6;case 6:return s++,[3,3];case 7:return[2,r];case 8:throw i.sent();case 9:return[2]}}))}))},e.prototype.createTeamInvite=function(e,t,n,a,c){return r(this,void 0,void 0,(function(){var r,l,f,h,p,d;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,28,,29]),[4,this.userRepository.findOne({email:n})];case 1:return r=i.sent(),[4,this.spaceRepository.find(a)];case 2:return l=i.sent(),[4,this.teamRepository.find(l.team)];case 3:if(null==(f=i.sent()))throw console.log("teamRecord is null"),new Error("team does not exist");return null==r?[3,18]:!0!==f.members.includes(r._id)?[3,4]:[2,!1];case 4:return[4,this.teamInviteRepository.findOne({invitee:r._id})];case 5:return null==i.sent()?[3,13]:[4,u.createAuth0User(n,e,t)];case 6:return 200===(p=i.sent()).status?[3,10]:[4,fetch("https://kanception.auth0.com/userinfo",{headers:{Authorization:c}})];case 7:return[4,i.sent().json()];case 8:return d=i.sent(),[4,o.resetPassword(d.sub,n)];case 9:return i.sent(),[2,!0];case 10:return[4,o.resetPassword(p.user_id,n)];case 11:return i.sent(),[2,!0];case 12:return[3,17];case 13:return[4,this.teamInviteRepository.create(a,r._id)];case 14:return i.sent(),[4,u.createAuth0User(n,e,t)];case 15:return p=i.sent(),[4,o.resetPassword(p.user_id,p.email)];case 16:return i.sent(),[2,!0];case 17:return[3,27];case 18:return[4,this.userRepository.create({_id:s.uuid(),name:{first:e,last:t},email:n,active:!1,spaces:[]})];case 19:return h=i.sent(),[4,this.teamInviteRepository.create(a,h._id)];case 20:return i.sent(),[4,u.createAuth0User(n,e,t)];case 21:return 200===(p=i.sent()).status?[3,25]:[4,fetch("https://kanception.auth0.com/userinfo",{headers:{Authorization:c}})];case 22:return[4,i.sent().json()];case 23:return d=i.sent(),[4,o.resetPassword(d.sub,n)];case 24:return i.sent(),[2,!0];case 25:return[4,o.resetPassword(p.user_id,p.email)];case 26:return i.sent(),[2,!0];case 27:return[3,29];case 28:throw i.sent();case 29:return[2]}}))}))},e.prototype.updateTeamInviteAccept=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,this.userRepository.findOne({sub:e})];case 1:return null===(n=i.sent())?[2,504]:[4,this.spaceRepository.findOne({team:t})];case 2:return r=i.sent(),[4,this.teamInviteRepository.findAll({team:r._id,invitee:n._id})];case 3:return 0===i.sent().length?[2,503]:(n.spaces.push(r._id),n.save(),[4,this.teamRepository.find(t)]);case 4:return null==(s=i.sent())?[2,503]:(s.members.push(n._id),s.save(),[4,this.teamInviteRepository.deleteOne({invitee:n._id,team:r._id})]);case 5:return i.sent(),[2,201];case 6:return i.sent(),[2,501];case 7:return[2]}}))}))},e.prototype.deleteInvite=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,this.userRepository.findOne({sub:e})];case 1:if(null===(n=i.sent()))throw new Error("User does not exist");return[4,this.spaceRepository.findOne({team:t})];case 2:return r=i.sent(),[4,this.teamInviteRepository.deleteOne({invitee:n._id,team:r._id})];case 3:return i.sent(),[2,!0];case 4:throw i.sent();case 5:return[2]}}))}))},e}();t.default=a},49:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),o=function(){function e(e,t,n,r,i,s){this.boardRepository=e,this.userRepository=t,this.groupRepository=n,this.spaceRepository=r,this.teamRepository=i,this.memberRepository=s}return e.prototype.createTeam=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o,u,a,c,l,f;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,10,,11]),[4,this.userRepository.findOne({sub:e})];case 1:if(null===(n=i.sent()))throw new Error("User is null");return[4,this.teamRepository.create(s.uuid(),[n._id],n._id,t)];case 2:return r=i.sent(),[4,this.memberRepository.create({_id:s.uuid(),team:r._id,user:n._id})];case 3:return i.sent(),[4,this.groupRepository.create("Backlog",r._id,0,void 0)];case 4:return o=i.sent(),[4,this.groupRepository.create("To-do",r._id,1,void 0)];case 5:return u=i.sent(),[4,this.groupRepository.create("In progress",r._id,2,void 0)];case 6:return a=i.sent(),[4,this.groupRepository.create("Review",r._id,3,void 0)];case 7:return c=i.sent(),[4,this.groupRepository.create("Done",r._id,4,void 0)];case 8:return l=i.sent(),f=[o,u,a,c,l],[4,this.boardRepository.create({_id:s.uuid(),title:t,owner:r._id,groups:f.map((function(e){return e._id})),order:0,parent:null,team:r._id,group:null,isTeamRoot:!0,isUserRoot:!1,count:0,comments:!1})];case 9:return i.sent(),[2,r];case 10:throw i.sent();case 11:return[2]}}))}))},e.prototype.readTeamRootsChildren=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.boardRepository.findAll({team:e,group:null})];case 1:return 0===(t=n.sent()).length?[2,null]:[2,t];case 2:throw n.sent();case 3:return[2]}}))}))},e.prototype.readTeam=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,this.userRepository.findOne({sub:e})];case 1:return null===(n=i.sent())?[2,null]:[4,this.spaceRepository.findOne({team:t})];case 2:return i.sent(),[4,this.memberRepository.findAll({user:n._id})];case 3:return r=i.sent(),s=r.map((function(e){return e.team})),console.log({teams:s}),!1===s.includes(t)?[2,null]:[4,this.teamRepository.find(t)];case 4:return null===(o=i.sent())?[2,null]:[2,o];case 5:throw i.sent();case 6:return[2]}}))}))},e}();t.default=o},962:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(786),o=n(119),u=function(){function e(e,t,n,r){this.userRepository=e,this.spaceRepository=t,this.teamRepository=n,this.memberRepository=r}return e.prototype.createUser=function(e,t){return r(this,void 0,void 0,(function(){var n,r,u;return i(this,(function(i){switch(i.label){case 0:return[4,this.userRepository.findAll({sub:e})];case 1:return n=i.sent(),[4,s("https://kanception.auth0.com/userinfo",{headers:{Authorization:t}})];case 2:return[4,i.sent().json()];case 3:return r=i.sent(),[4,this.userRepository.findAll({email:r.email})];case 4:return u=i.sent(),0!==n.length||0!==u.length?[3,6]:[4,this.userRepository.create({_id:o.uuid(),sub:e,spaces:[],active:!0})];case 5:return[2,i.sent()];case 6:return 0===n.length&&u.length>0?(u[0].sub=e,u[0].active=!0,u[0].save(),[2,u[0]]):[2,n[0]];case 7:return[2]}}))}))},e.prototype.readUser=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.userRepository.findOne({sub:e})];case 1:return t=n.sent(),[4,this.memberRepository.findAll({user:t._id})];case 2:return[2,n.sent().map((function(e){return e.team}))];case 3:throw n.sent();case 4:return[2]}}))}))},e.prototype.readProfiles=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,o,u,a,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),[4,this.userRepository.findAll({sub:e})];case 1:return 0===(n=i.sent()).length?[2,null]:(console.log({team:t}),[4,this.spaceRepository.findOne({_id:t})]);case 2:return r=i.sent(),[4,this.memberRepository.findAll({team:r.team})];case 3:if(s=i.sent().map((function(e){return e.user})),console.log({members:s}),console.log(n[0]._id),!1===s.includes(n[0]._id))return console.log("members does not include"),[2,null];o=[],u=0,a=s,i.label=4;case 4:return u<a.length?(c=a[u],[4,this.userRepository.find(c)]):[3,7];case 5:if(null==(l=i.sent()))return[2,null];o.push({_id:l._id,email:l.email,firstName:l.firstName,lastName:l.lastName}),i.label=6;case 6:return u++,[3,4];case 7:return[2,o];case 8:throw i.sent();case 9:return[2]}}))}))},e.prototype.updateName=function(e,t,n,o){return r(this,void 0,void 0,(function(){var r,u,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,this.userRepository.findAll({sub:e})];case 1:return r=i.sent(),u=r[0],[4,s("https://kanception.auth0.com/userinfo",{headers:{Authorization:o}})];case 2:return[4,i.sent().json()];case 3:return a=i.sent(),u.firstName=t,u.lastName=n,u.email=a.email,u.save(),[2,u];case 4:throw i.sent();case 5:return[2]}}))}))},e}();t.default=u},840:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAuth0User=void 0;var o=s(n(786)),u=n(119);t.createAuth0User=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r,s,a,c;return i(this,(function(i){switch(i.label){case 0:return[4,o.default("https://kanception.auth0.com/oauth/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({client_id:"",client_secret:"",audience:"https://kanception.auth0.com/api/v2/",grant_type:"client_credentials"})})];case 1:return[4,i.sent().json()];case 2:return r=i.sent(),s=r.access_token,[4,o.default("https://kanception.auth0.com/api/v2/users",{method:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:JSON.stringify({connection:"Username-Password-Authentication",email:e,email_verified:!0,given_name:t,family_name:n,password:u.uuid()})})];case 3:return a=i.sent(),console.log(a),[4,a.json()];case 4:return c=i.sent(),console.log(c),[2,c]}}))}))}},658:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.resetPassword=t.sendPasswordResetEmail=void 0;var s=n(786),o=n(480),u=function(e,t){var n="UTF-8",r={Source:"Kanception.io <verify@kanception.io>",Destination:{ToAddresses:[e]},Message:{Subject:{Data:"Kanception.io: Verify account and set password",Charset:n},Body:{Text:{Data:t,Charset:n},Html:{Data:'<html>\n  <head></head>\n  <body>\n    <a href="'+t+'">Verify account</a>\n  </body>\n  </html>',Charset:n}}}};(new o.SES).sendEmail(r,(function(e,t){e?console.log(e.message):console.log("Email sent! Message ID: ",t.MessageId)}))};t.sendPasswordResetEmail=u,t.resetPassword=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,o,a;return i(this,(function(i){switch(i.label){case 0:return console.log({email:t}),console.log({user_id:e}),[4,s("https://kanception.auth0.com/oauth/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({client_id:"",client_secret:"",audience:"https://kanception.auth0.com/api/v2/",grant_type:"client_credentials"})})];case 1:return[4,i.sent().json()];case 2:return n=i.sent(),r=n.access_token,[4,s("https://kanception.auth0.com/api/v2/tickets/password-change?email="+t,{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify({user_id:e})})];case 3:return o=i.sent(),console.log("sent reset password email"),[4,o.json()];case 4:return a=i.sent(),console.log({resetPassword:a}),u(t,a.ticket),[2]}}))}))}},607:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(127),u=n(479),a=n(473),c=n(716),l=n(843),f=s(n(749)),h=s(n(328)),p=s(n(510)),d=s(n(280)),y=s(n(188)),b=s(n(115)),v=s(n(705)),w=s(n(738)),m=s(n(494)),_=s(n(818)),g=s(n(810)),S=s(n(147)),R=s(n(499)),x=s(n(562)),k=s(n(162)),P=s(n(634)),j=s(n(940)),O=s(n(49)),T=s(n(962)),A=s(n(577)),G=s(n(737)),q=s(n(250)),I=s(n(865)),M=s(n(917)),E=s(n(746)),C=s(n(238)),U=s(n(796)),B=s(n(519)),D=new f.default,N=new h.default,z=new p.default,J=new d.default,F=new y.default,K=new b.default,L=new v.default,V=new w.default,H=new m.default,Q=new _.default,W=new S.default(D,N),X=new g.default(z,D,J,N,F),Y=new R.default(D,F,z,K,L,V,Q),Z=new x.default(z,D,J,N,F,X),$=new k.default(z,D,J,N,F,K,L,Q,X),ee=new P.default(z,D,J,N,F,V,L,K,Q,X),te=new j.default(H,V,L,D),ne=new O.default(z,D,J,L,V,Q),re=new T.default(D,L,V,Q),ie=new A.default(X),se=new G.default(W),oe=new q.default(Y),ue=new I.default(Z),ae=new M.default($),ce=new E.default(ee),le=new B.default(te),fe=new U.default(ne),he=new C.default(re),pe=c({secret:l.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://kanception.auth0.com/.well-known/jwks.json"}),audience:"https://kanception.auth0.com/api/v2/",issuer:"https://kanception.auth0.com/",algorithms:["RS256"],scope:"openid profile email"}),de=o();de.use(u()),de.use(a()),de.use(o.json()),de.use(pe);var ye=n(39).production,be=n(121),ve=be.Sequelize,we=(be.Model,be.DataTypes,new ve(ye.database,ye.username,ye.password,ye));r(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,we.sync()];case 1:return e.sent(),de.get("/comments",oe.readComments),de.post("/comments",oe.createComment),de.get("/assignments",se.readAssignments),de.post("/assignment",se.createAssignment),de.delete("/assignment",se.deleteAssignment),de.get("/spaces",ce.readSpaces),de.delete("/space",ce.deleteSpace),de.post("/spaces/add",ce.createSpace),de.delete("/project",ae.deleteProject),de.get("/projects",ae.readProjects),de.post("/projects/add",ae.createProject),de.get("/tree",ie.readTree),de.get("/user",he.readUser),de.post("/user",he.createUser),de.post("/team/invite/accept",le.updateTeamInviteAccept),de.post("/name",he.updateName),de.post("/team/invite",le.createTeamInvite),de.get("/team/root/children",fe.readTeamRootsChildren),de.get("/teaminvites",le.readTeamInvites),de.delete("/teaminvites",le.deleteInvite),de.get("/profiles",he.readProfiles),de.get("/team",fe.readTeam),de.post("/team",fe.createTeam),de.get("/groups",ue.readGroups),de.post("/groups/add",ue.createGroup),de.post("/groups/update",ue.updateGroup),de.delete("/groups",ue.deleteGroup),de.delete("/boards",ie.deleteBoard),de.post("/board/update",ie.updateBoard),de.post("/boards/add",ie.createBoard),de.listen(process.env.PORT||4e3,(function(){return console.log("API listening at http://localhost:4000")})),[2]}}))}))},125:(e,t,n)=>{"use strict";const r=n(747),i=n(622),s=n(121),o=i.basename(__filename),u=n(39).production,a={};let c;c=u.use_env_variable?new s(process.env[u.use_env_variable],u):new s(u.database,u.username,u.password,u),r.readdirSync(__dirname).filter((e=>0!==e.indexOf(".")&&e!==o&&".js"===e.slice(-3))).forEach((e=>{const t=n(363)(i.join(__dirname,e))(c,s.DataTypes);a[t.name]=t})),Object.keys(a).forEach((e=>{a[e].associate&&a[e].associate(a)})),a.sequelize=c,a.Sequelize=s,e.exports=a},363:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=363,e.exports=t},480:e=>{"use strict";e.exports=require("aws-sdk")},473:e=>{"use strict";e.exports=require("body-parser")},479:e=>{"use strict";e.exports=require("cors")},127:e=>{"use strict";e.exports=require("express")},716:e=>{"use strict";e.exports=require("express-jwt")},747:e=>{"use strict";e.exports=require("fs")},843:e=>{"use strict";e.exports=require("jwks-rsa")},786:e=>{"use strict";e.exports=require("node-fetch")},622:e=>{"use strict";e.exports=require("path")},121:e=>{"use strict";e.exports=require("sequelize")},119:e=>{"use strict";e.exports=require("uuidv4")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(607)})();